<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2025 by anonymous (http://jsbin.com/gekodaluze/1/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Chewy&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <title>√Årbol con animaci√≥n</title>
  <style>
    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      width: 100%;
      height: 100%;
      font-family: sans-serif;
    }

    .nubes {
      position: absolute;
      top: 50px;
      left: 0;
      width: 100%;
      height: 150px;
      background: url('https://i.imgur.com/U3Z3omL.png') repeat-x;
      background-size: contain;
      animation: moverNubes 60s linear infinite;
      z-index: 0;
      opacity: 0.5;
      filter: brightness(1);
      transition: filter 1s ease;
    }

    @keyframes moverNubes {
      from { background-position-x: 0; }
      to { background-position-x: 1000px; }
    }

    .sol, .luna {
      position: absolute;
      top: 80px;
      right: 60px;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      z-index: 0;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .sol {
      background: radial-gradient(circle, #ffe259, #ffa751);
      box-shadow: 0 0 30px 10px rgba(255, 204, 0, 0.4);
    }

    .luna {
      background: radial-gradient(circle, #f4f4f4, #bbb);
      box-shadow: 0 0 20px 6px rgba(255, 255, 255, 0.2);
    }

    .estrellas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: radial-gradient(white 1px, transparent 1px);
      background-size: 3px 3px;
      opacity: 0;
      z-index: 0;
      animation: parpadeoEstrellas 2s infinite ease-in-out alternate;
      transition: opacity 1s ease;
      pointer-events: none;
    }

    @keyframes parpadeoEstrellas {
      from { opacity: 0.3; }
      to { opacity: 0.6; }
    }

    .texto {
      position: absolute;
      top: 20%;
      left: 5%;
      max-width: 280px;
      font-size: 1.3rem;
      color: #4b5563;
      z-index: 10;
      white-space: pre-wrap;
      line-height: 1.4;
      text-align: left;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .aparecer {
      opacity: 1;
    }

    .contador {
      position: absolute;
      bottom: 20px;
      width: 100%;
      text-align: center;
      font-size: 1.2rem;
      color: #1f2937;
      z-index: 10;
      font-family: "Press Start 2P", system-ui;
    }

    canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
      width: 100vw;
      height: 100vh;
    }

    @media (max-width: 600px) {
      .texto {
        top: auto;
        bottom: 120px;
        left: 5%;
        max-width: 90%;
        font-size: 1rem;
        font-family: 'Chewy', cursive;
        color: #ff0004;
      }

      .texto::after {
        content: "|";
        animation: blink 1s infinite;
        margin-left: 4px;
        color: #4b5563;
      }

      @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
      }

      .contador {
        font-size: 0.9rem;
        padding: 10px;
        bottom: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="nubes" id="nubes"></div>
  <div class="estrellas" id="estrellas"></div>
  <div class="sol"></div>
  <div class="luna"></div>
  <div class="texto" id="texto"></div>
  <div class="contador" id="contador"></div>
  <canvas id="arbolCanvas"></canvas>

  <script>
    // Cambios visuales por hora
    function cambiarFondoPorHora() {
      const hora = new Date().getHours();
      const body = document.body;
      const nubes = document.getElementById("nubes");
      if (hora >= 6 && hora < 12) {
        body.style.background = "linear-gradient(#f0f9ff, #e0f7fa)";
        nubes.style.filter = "brightness(1)";
      } else if (hora >= 12 && hora < 18) {
        body.style.background = "linear-gradient(#fef9c3, #fde68a)";
        nubes.style.filter = "brightness(1)";
      } else if (hora >= 18 && hora < 20) {
        body.style.background = "linear-gradient(#fcd34d, #fca5a5)";
        nubes.style.filter = "brightness(0.8)";
      } else {
        body.style.background = "linear-gradient(#0f172a, #1e293b)";
        nubes.style.filter = "brightness(0.4)";
      }
    }

    function mostrarElementosCielo() {
      const hora = new Date().getHours();
      const sol = document.querySelector(".sol");
      const luna = document.querySelector(".luna");
      const estrellas = document.getElementById("estrellas");

      sol.style.opacity = (hora >= 12 && hora < 18) ? "1" : "0";
      luna.style.opacity = (hora >= 18 || hora < 6) ? "1" : "0";
      estrellas.style.opacity = (hora >= 18 || hora < 6) ? "1" : "0";
    }

    cambiarFondoPorHora();
    mostrarElementosCielo();

    // CONTADOR
    const contador = document.getElementById("contador");
    function actualizarContador() {
      const inicio = new Date("2024-02-04T00:00:00");
      const ahora = new Date();
      const diferencia = ahora - inicio;
      const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
      const horas = Math.floor((diferencia / (1000 * 60 * 60)) % 24);
      const minutos = Math.floor((diferencia / (1000 * 60)) % 60);
      const segundos = Math.floor((diferencia / 1000) % 60);
      contador.textContent = `Llevamos juntos ${dias} d√≠as, ${horas} horas, ${minutos} minutos, ${segundos} segundos.`;
    }
    setInterval(actualizarContador, 1000);
    actualizarContador();

    // TEXTO
    const mensaje = "EL amor crece y se fortalece con LEALTAD, \nestamos donde estamos por todo lo que\nnos hemos cuidado, compartido y \nsuperado juntos üêªüê•.";
    const textoDiv = document.getElementById("texto");
    let i = 0;
    function escribirTexto() {
      if (i < mensaje.length) {
        textoDiv.innerHTML += mensaje.charAt(i);
        i++;
        setTimeout(escribirTexto, 80);
      } else {
        textoDiv.classList.add("aparecer");
      }
    }
    setTimeout(() => {
      textoDiv.classList.add("aparecer");
      escribirTexto();
    }, 1000);

    // ANIMACI√ìN DEL √ÅRBOL
    const canvas = document.getElementById("arbolCanvas");
    const ctx = canvas.getContext("2d");
    let centroX = window.innerWidth > 600 ? window.innerWidth / 2 : window.innerWidth * 0.6;
    const altura = window.innerHeight;
    const semillaBase = altura - 130;
    let semillaY = -50;
    let semillaCayendo = true;
    let moverArbol = false;
    let desplazamientoX = 0;
    const hojas = [];
    const hojasFijas = [];
    const colores = ["#f43f5e", "#f97316", "#facc15", "#84cc16", "#22d3ee"];
    const MAX_HOJAS = window.innerWidth < 600 ? 60 : 100;
    let ramasCrecidas = [];
    let frame = 0;

    function ajustarCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    ajustarCanvas();

    window.addEventListener("resize", () => {
      ajustarCanvas();
      centroX = canvas.width / 2;
      semillaY = -50;
      semillaCayendo = true;
      ramasCrecidas = [];
      hojas.length = 0;
      hojasFijas.length = 0;
      desplazamientoX = 0;
    });

    function dibujarTrapezoide(x1, y1, x2, y2, anchoBase, anchoPunta, color) {
      const dx = x2 - x1, dy = y2 - y1;
      const dist = Math.sqrt(dx * dx + dy * dy);
      const ux = dx / dist, uy = dy / dist;
      const px = -uy, py = ux;
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.moveTo(x1 + px * anchoBase, y1 + py * anchoBase);
      ctx.lineTo(x2 + px * anchoPunta, y2 + py * anchoPunta);
      ctx.lineTo(x2 - px * anchoPunta, y2 - py * anchoPunta);
      ctx.lineTo(x1 - px * anchoBase, y1 - py * anchoBase);
      ctx.closePath();
      ctx.fill();
    }

    function Rama(x, y, longitud, angulo, profundidad, anchoPadre = 0) {
      this.x = x;
      this.y = y;
      this.longitud = longitud;
      this.angulo = angulo;
      this.profundidad = profundidad;
      this.progress = 0;
      this.anchoPadre = anchoPadre;
      this.actualizar = function () {
        if (this.progress < 1) this.progress += 0.01;
        const easedProgress = 1 - Math.pow(1 - this.progress, 3);
        const finX = this.x + Math.cos(this.angulo) * this.longitud * easedProgress;
        const finY = this.y - Math.sin(this.angulo) * this.longitud * easedProgress;
        let anchoBase = this.profundidad === 0 ? 30 : Math.max(this.anchoPadre * 0.7, 1.5);
        let anchoPunta = Math.max(anchoBase * 0.6, 1);
        let color = this.profundidad === 0 ? "#4b2e05" : `rgb(60,${50 + this.profundidad * 15},20)`;
        dibujarTrapezoide(this.x + desplazamientoX, this.y, finX + desplazamientoX, finY, anchoBase, anchoPunta, color);
        if (this.progress >= 1 && !this.expandidas && this.profundidad < 6) {
          const angOffset = 0.35 + Math.random() * 0.3;
          const longFactor = 0.6 + Math.random() * 0.2;
          const nuevaLong = this.longitud * longFactor;
          ramasCrecidas.push(
            new Rama(finX, finY, nuevaLong, this.angulo - angOffset, this.profundidad + 1, anchoPunta),
            new Rama(finX, finY, nuevaLong, this.angulo + angOffset, this.profundidad + 1, anchoPunta),
            new Rama(finX, finY, nuevaLong * 0.8, this.angulo + (Math.random() - 0.5) * 0.5, this.profundidad + 1, anchoPunta)
          );
          this.expandidas = true;
        }
        if (this.progress >= 1 && this.profundidad >= 3 && !this.hojaColocada) {
          hojasFijas.push({
            x: finX,
            y: finY,
            radio: 7 + Math.random() * 4,
            color: colores[Math.floor(Math.random() * colores.length)]
          });
          this.hojaColocada = true;
        }
      };
    }

    function dibujarHoja(hoja) {
      ctx.save();
      ctx.translate(hoja.x + desplazamientoX, hoja.y);
      ctx.globalAlpha = hoja.opacity;
      ctx.rotate(Math.sin(hoja.angle) * 0.3);
      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.bezierCurveTo(-hoja.radio, -hoja.radio, -hoja.radio, hoja.radio / 2, 0, hoja.radio * 1.5);
      ctx.bezierCurveTo(hoja.radio, hoja.radio / 2, hoja.radio, -hoja.radio, 0, 0);
      ctx.fillStyle = hoja.color;
      ctx.fill();
      ctx.restore();
    }

    function animar() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (semillaCayendo) {
        if (semillaY < semillaBase) {
          semillaY += 3;
          ctx.beginPath();
          ctx.arc(centroX, semillaY, 10, 0, Math.PI * 2);
          ctx.fillStyle = "#7c3aed";
          ctx.fill();
        } else {
          semillaCayendo = false;
          ramasCrecidas.push(new Rama(centroX, semillaBase, 140, Math.PI / 2, 0, 30));
          moverArbol = true;
        }
      } else {
        if (moverArbol && desplazamientoX < 100) desplazamientoX += 0.3;
        ramasCrecidas.forEach(r => r.actualizar());
        if (frame % 10 === 0 && hojas.length < MAX_HOJAS) {
          const disponibles = hojasFijas.filter(h => !h.usada);
          if (disponibles.length > 0) {
            const origen = disponibles[Math.floor(Math.random() * disponibles.length)];
            hojas.push({
              x: origen.x,
              y: origen.y,
              radio: 7 + Math.random() * 3,
              vx: -0.5 + Math.random() * -0.4,
              vy: 0.4 + Math.random() * 0.2,
              angle: Math.random() * Math.PI * 2,
              opacity: 1,
              color: colores[Math.floor(Math.random() * colores.length)]
            });
            origen.usada = true;
          }
        }
        hojas.forEach((hoja, i) => {
          hoja.x += hoja.vx + Math.sin((frame + i) / 60) * 0.2;
          hoja.y += hoja.vy + Math.cos((frame + i) / 80) * 0.2;
          hoja.angle += 0.01;
          if (hoja.x + desplazamientoX < 350 && hoja.y > canvas.height * 0.35 && hoja.y < canvas.height * 0.75)
            hoja.opacity = Math.max(0.1, hoja.opacity - 0.01);
          else
            hoja.opacity = Math.min(1, hoja.opacity + 0.005);
          if (hoja.y > canvas.height) hojas.splice(i, 1);
          dibujarHoja(hoja);
        });
        hojasFijas.forEach(hoja => dibujarHoja(hoja));
      }
      frame++;
      requestAnimationFrame(animar);
    }
    animar();
  </script>
</body>
</html>

